import{_ as b,a8 as c,q as n,G as t,J as p,K as _,Q as d,P as a,H as r,R as g,D as m,p as l,U as k,S as C}from"./index-Dasq562Y.js";const f={name:"imageDetail",data(){return{pk:null,history:[],data:{image:{Config:{Cmd:[]},Created:""}}}},created(){this.pk=this.$route.query.id,this.image=this.$route.query.image,this.getDetail(),this.getHistory()},methods:{getDetail(){c.get(`/api/admin/docker/host/${this.pk}/image/${this.image}`).then(o=>{this.data=o.results}).catch(o=>{})},delTag(o){c.post(`/api/admin/docker/host/${this.pk}/images/del_tag`,{tag:o}).then(s=>{this.getDetail()}).catch(s=>{})},getHistory(){c.get(`/api/admin/docker/host/${this.pk}/image_history/${this.image}`).then(o=>{this.history=o.results}).catch(o=>{})}}},w={class:"container"},D={class:"wrap"},x={class:"widget"},E={key:0,class:"widget-content"},S={class:"widget"},T={class:"widget-content"},I={class:"table"},B={key:0,class:"td-val"},N={class:"td-val"},z={class:"td-val"},V={class:"td-val"},P={class:"widget"},R={class:"widget-content"},q={class:"table"},F={key:0,class:"td-val"},H={key:0,class:"td-val"},O={key:0,class:"td-val"},j={key:0},L={class:"td-val"},M={class:"widget"},A={class:"widget-content"},G={key:0};function J(o,s,K,Q,e,h){const v=m("el-tag"),u=m("el-table-column"),y=m("el-table");return l(),n("div",w,[t("div",D,[t("div",x,[s[0]||(s[0]=t("div",{class:"tool-bar"},"Image tags",-1)),e.data.image&&e.data.image.RepoTags?(l(),n("div",E,[(l(!0),n(p,null,_(e.data.image.RepoTags,i=>(l(),k(v,{class:"i-tag",onClose:U=>h.delTag(i),closable:"","disable-transitions":!1,key:"tag"},{default:g(()=>[C(a(i),1)]),_:2},1032,["onClose"]))),128))])):d("",!0)]),t("div",S,[s[5]||(s[5]=t("div",{class:"tool-bar"},"Image details",-1)),t("div",T,[t("table",null,[t("tbody",I,[t("tr",null,[s[1]||(s[1]=t("td",null,[t("span",{class:"td-attr"},"Id")],-1)),t("td",null,[e.data.image?(l(),n("span",B,a(e.data.image.Id),1)):d("",!0)])]),t("tr",null,[s[2]||(s[2]=t("td",null,[t("span",{class:"td-attr"},"Size")],-1)),t("td",null,[t("span",N,a((e.data.image.Size/1e3/1e3).toFixed(1)),1)])]),t("tr",null,[s[3]||(s[3]=t("td",null,[t("span",{class:"td-attr"},"Created")],-1)),t("td",null,[t("span",z,a(e.data.image.Created.split(".")[0].replace("T"," ")),1)])]),t("tr",null,[s[4]||(s[4]=t("td",null,[t("span",{class:"td-attr"},"Build")],-1)),t("td",null,[t("span",V,"Docker "+a(e.data.image.DockerVersion)+" on "+a(e.data.image.Os)+","+a(e.data.image.Architecture),1)])])])])])]),t("div",P,[s[10]||(s[10]=t("div",{class:"tool-bar"},"Dockerfile details",-1)),t("div",R,[t("table",null,[t("tbody",q,[t("tr",null,[s[6]||(s[6]=t("td",null,[t("span",{class:"td-attr"},"CMD")],-1)),t("td",null,[e.data.image.Config.Cmd?(l(),n("span",F,a(e.data.image.Config.Cmd.join(" ")),1)):d("",!0)])]),t("tr",null,[s[7]||(s[7]=t("td",null,[t("span",{class:"td-attr"},"ENTRYPOINT")],-1)),t("td",null,[e.data.image.Config.Entrypoint?(l(),n("span",H,a(e.data.image.Config.Entrypoint.join()),1)):d("",!0)])]),t("tr",null,[s[8]||(s[8]=t("td",null,[t("span",{class:"td-attr"},"EXPOSE")],-1)),t("td",null,[e.data.image.Config?(l(),n("span",O,a(e.data.image.Config.ExposedPorts),1)):d("",!0)])]),e.data.image.Config?(l(),n("tr",j,[s[9]||(s[9]=t("td",null,[t("span",{class:"td-attr"},"Env")],-1)),t("td",null,[t("span",L,[t("table",null,[t("tbody",null,[(l(!0),n(p,null,_(e.data.image.Config.Env,i=>(l(),n("tr",null,a(i),1))),256))])])])])])):d("",!0)])])])]),t("div",M,[s[11]||(s[11]=t("div",{class:"tool-bar"},"Image layerss",-1)),t("div",A,[r(y,{data:e.history},{default:g(()=>[r(u,{type:"index"}),r(u,{label:"Size"},{default:g(i=>[i.row.Size/1e3/1e3?(l(),n("span",G,a((i.row.Size/1e3/1e3).toFixed(1))+"M",1)):d("",!0)]),_:1}),r(u,{label:"Layer"},{default:g(i=>[t("span",null,a(i.row.CreatedBy.replace("/bin/sh -c #(nop)","")),1)]),_:1})]),_:1},8,["data"])])])])])}const Y=b(f,[["render",J],["__scopeId","data-v-11ba9705"]]);export{Y as default};
