var g=(u,o,i)=>new Promise((e,m)=>{var p=r=>{try{t(i.next(r))}catch(c){m(c)}},d=r=>{try{t(i.throw(r))}catch(c){m(c)}},t=r=>r.done?e(r.value):Promise.resolve(r.value).then(p,d);t((i=i.apply(u,o)).next())});import{_ as D,r as v,e as B,z as q,o as U,D as s,S as b,n as _,Q as n,H as l,G as F,m as N,K as w,L as E,R as k,a7 as y,av as V}from"./index-BYxaA_Lm.js";/* empty css              */const L={name:"resourceForm",props:{open:{type:Boolean,default:!1},data:{type:Object}},setup(u,{emit:o}){const i=v([{label:"远程镜像",id:1},{label:"本地镜像",id:2}]),e=B({id:null,name:"",docker_type:null,image:null,description:null});q(()=>u.data,t=>{t&&(e.id=t.id,e.docker_type=t.docker_type,e.image=t.image,e.description=t.description,e.name=t.name)},{immediate:!0,deep:!0});const m={name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],docker_type:[{required:!0,message:"请选择加载类型",trigger:"change"}],description:[{required:!0,message:"请填写描述信息",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}]},p=()=>{o("action",!1)},d=()=>g(null,null,function*(){e.id?(yield y.put(`/api/admin/docker/resource/${e.id}`,e),o("action",!0),V({message:"提交成功",type:"success"})):(yield y.post("/api/admin/docker/resource",e),o("action",!0),V({message:"提交成功",type:"success"}))});return U(()=>{}),{docker_type_list:i,formData:e,rules:m,cancel:p,submit:d}}},M={slot:"footer",class:"footer-right"};function j(u,o,i,e,m,p){const d=s("el-input"),t=s("el-form-item"),r=s("el-option"),c=s("el-select"),x=s("el-form"),f=s("el-button"),C=s("el-dialog");return _(),b(C,{modelValue:i.open,title:e.formData.id?"编辑资源":"添加资源",center:"",onClose:e.cancel,width:"40%"},{default:n(()=>[l(x,{model:e.formData,ref:"form","label-width":"80px"},{default:n(()=>[l(t,{label:"资源名称",prop:"name"},{default:n(()=>[l(d,{modelValue:e.formData.name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.formData.name=a)},null,8,["modelValue"])]),_:1}),l(t,{label:"加载类型",prop:"docker_type",required:""},{default:n(()=>[l(c,{modelValue:e.formData.docker_type,"onUpdate:modelValue":o[1]||(o[1]=a=>e.formData.docker_type=a)},{default:n(()=>[(_(!0),N(w,null,E(e.docker_type_list,a=>(_(),b(r,{label:a.label,key:a.id,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(t,{label:"镜像名称",prop:"image"},{default:n(()=>[l(d,{modelValue:e.formData.image,"onUpdate:modelValue":o[2]||(o[2]=a=>e.formData.image=a)},null,8,["modelValue"])]),_:1}),l(t,{label:"描述",prop:"description"},{default:n(()=>[l(d,{type:"textarea",modelValue:e.formData.description,"onUpdate:modelValue":o[3]||(o[3]=a=>e.formData.description=a),rows:5},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),F("span",M,[l(f,{onClick:e.cancel},{default:n(()=>[...o[4]||(o[4]=[k("取消",-1)])]),_:1},8,["onClick"]),l(f,{type:"primary",onClick:e.submit},{default:n(()=>[...o[5]||(o[5]=[k("确定",-1)])]),_:1},8,["onClick"])])]),_:1},8,["modelValue","title","onClose"])}const K=D(L,[["render",j]]);export{K as default};
