import{_ as z,a8 as f,av as w,q as b,H as t,R as r,G as i,E as L,U as y,D as o,a9 as D,p as _,S as u,P as c}from"./index-DGNIR5hM.js";import U from"./addUser-SA7tT3HG.js";import{u as Q}from"./hooks-RS0fjQ5R.js";const S={width:1024,height:1024,body:'<path fill="currentColor" d="m795.904 750.72l124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704a352 352 0 0 0 0 704z"/>'},B={name:"Account",components:{addUser:U},data(){return{loading:!1,dialogUser:!0,TeamOptions:[],list:null,total:0,listLoading:!0,listQuery:{search:null,page:1,page_size:10},RolesData:[],currentItemVisible:!1,currentItem:{}}},created(){this.getList()},methods:{Search(){return S},useRenderIcon:Q,getList(){this.listLoading=!0,f.get("/api/admin/user",this.listQuery).then(s=>{this.list=s.data,this.total=s.total,this.listLoading=!1})},userDelete(s){f.delete(`/api/admin/user/${s.id}`).then(e=>{this.$message({message:"删除成功",type:"success"}),this.getList()})},handleSizeChange(s){this.listQuery.page_size=s,this.getList()},handleCurrentChange(s){this.listQuery.page=s,this.getList()},handleCreate(){this.currentItem={},this.currentItemVisible=!0},handleUpdate(s){this.currentItem=s,this.currentItemVisible=!0},updateData(){if(this.currentItem.id){let s=this.currentItem;f.put(`/api/admin/user/${s.id}`,s).then(e=>{w.success("更新成功"),this.getList()}).catch(e=>{}).finally(()=>{this.currentItemVisible=!1})}else{let s=this.currentItem;if(!s.username){this.$message({message:"请输入用户名",type:"error"});return}if(!s.password){this.$message({message:"请输入密码",type:"error"});return}if(!s.confirm_password){this.$message({message:"请输入确认密码",type:"error"});return}if(s.password!==s.confirm_password){this.$message({message:"两次输入密码不一致",type:"error"});return}f.post("/api/admin/user",s).then(e=>{w.success("新增成功"),this.getList()}).catch(e=>{}).finally(()=>{this.currentItemVisible=!1})}}}},R={class:"main"},j={class:"w-[99/100] mt-2 px-2 pb-2 bg-bg_color"},q={class:"flex justify-between w-full h-[60px] p-4"},E={class:"flex items-center justify-around"},N={key:1},M={class:"pagination-container"};function T(s,e,A,F,a,n){const g=o("el-input"),m=o("el-form-item"),d=o("el-button"),h=o("el-form"),p=o("el-table-column"),C=o("el-tag"),I=o("el-table"),V=o("el-pagination"),k=o("el-dialog"),v=D("loading");return _(),b("div",R,[t(h,{class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px]",inline:!0},{default:r(()=>[t(m,{label:"角色名称：",prop:"name"},{default:r(()=>[t(g,{modelValue:a.listQuery.search,"onUpdate:modelValue":e[0]||(e[0]=l=>a.listQuery.search=l),placeholder:"请输入用户名称",clearable:"",class:"!w-[200px]"},null,8,["modelValue"])]),_:1}),t(m,null,{default:r(()=>[t(d,{type:"primary",icon:n.useRenderIcon(n.Search()),loading:a.loading,onClick:n.getList},{default:r(()=>e[6]||(e[6]=[u(" 搜索 ")])),_:1},8,["icon","loading","onClick"])]),_:1})]),_:1}),i("div",j,[i("div",q,[e[8]||(e[8]=i("p",{class:"font-bold truncate"},"用户列表",-1)),i("div",E,[t(d,{type:"primary",onClick:n.handleCreate},{default:r(()=>e[7]||(e[7]=[u("添加")])),_:1},8,["onClick"])])]),i("div",null,[L((_(),y(I,{fit:"","highlight-current-row":"",stripe:"",data:a.list,style:{width:"100%"}},{default:r(()=>[t(p,{align:"center",label:"ID",width:"70px",prop:"id"}),t(p,{label:"用户名",width:"150px",align:"center"},{default:r(l=>[l.row.is_captain?(_(),y(C,{key:0,effect:"dark"},{default:r(()=>[u(c(l.row.username),1)]),_:2},1024)):(_(),b("span",N,c(l.row.username),1))]),_:1}),t(p,{width:"180px",align:"center",label:"邮箱"},{default:r(l=>[i("span",null,c(l.row.email),1)]),_:1}),t(p,{align:"center",label:"注册日期"},{default:r(l=>[i("span",null,c(l.row.date_created),1)]),_:1}),t(p,{align:"center",label:"上次登陆",width:"250"},{default:r(l=>[i("span",null,c(l.row.date_modified),1)]),_:1}),t(p,{align:"center",label:"操作",width:"200"},{default:r(l=>[t(d,{type:"primary",link:"",onClick:x=>n.handleUpdate(l.row)},{default:r(()=>e[9]||(e[9]=[u("编辑")])),_:2},1032,["onClick"]),t(d,{type:"danger",link:"",onClick:x=>n.userDelete(l.row)},{default:r(()=>e[10]||(e[10]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[v,a.listLoading]]),i("div",M,[t(V,{background:"",class:"page-r","current-page":a.listQuery.page,"page-sizes":[10,20,30,50],"page-size":a.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])]),t(k,{title:a.currentItem.id?"编辑用户":"添加用户",modelValue:a.currentItemVisible,"onUpdate:modelValue":e[5]||(e[5]=l=>a.currentItemVisible=l),"close-on-click-modal":!1,center:"",width:"600px"},{footer:r(()=>[t(d,{onClick:e[4]||(e[4]=l=>this.currentItemVisible=!1)},{default:r(()=>e[11]||(e[11]=[u("取消")])),_:1}),t(d,{type:"primary",onClick:n.updateData},{default:r(()=>e[12]||(e[12]=[u("提交")])),_:1},8,["onClick"])]),default:r(()=>[t(h,{ref:"dataForm",model:a.currentItem,"label-width":"100px","label-position":"right"},{default:r(()=>[t(m,{label:"用户名",prop:"username"},{default:r(()=>[t(g,{modelValue:a.currentItem.username,"onUpdate:modelValue":e[1]||(e[1]=l=>a.currentItem.username=l)},null,8,["modelValue"])]),_:1}),t(m,{label:"密    码",prop:"password",required:""},{default:r(()=>[t(g,{type:"password",modelValue:a.currentItem.password,"onUpdate:modelValue":e[2]||(e[2]=l=>a.currentItem.password=l),"show-password":""},null,8,["modelValue"])]),_:1}),t(m,{label:"确认密码",prop:"confirm_password",required:""},{default:r(()=>[t(g,{type:"password",modelValue:a.currentItem.confirm_password,"onUpdate:modelValue":e[3]||(e[3]=l=>a.currentItem.confirm_password=l),"show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}const P=z(B,[["render",T],["__scopeId","data-v-2d567a8b"]]);export{P as default};
