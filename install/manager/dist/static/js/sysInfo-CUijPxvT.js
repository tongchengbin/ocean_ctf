var f=(o,e,n)=>new Promise((g,r)=>{var c=l=>{try{s(n.next(l))}catch(p){r(p)}},i=l=>{try{s(n.throw(l))}catch(p){r(p)}},s=l=>l.done?g(l.value):Promise.resolve(l.value).then(c,i);s((n=n.apply(o,e)).next())});import{_ as k,D as d,m as x,n as V,G as u,H as t,Q as a,R as h,a7 as b,av as _}from"./index-pPDUazPi.js";const w={name:"sysInfo",data(){return{form:{port_range:null,ip:null,docker_api:null},rules:{ip:[{required:!0,message:"请输入出口IP",trigger:"blur"}],docker_api:[{required:!0,message:"请输入Docker API地址",trigger:"blur"}],port_range:[{required:!0,message:"请输入开放端口范围",trigger:"blur"}]}}},created(){this.getConfig()},methods:{getConfig(){return f(this,null,function*(){try{const o=yield b.get("/api/admin/config");this.form={ip:o.data.ip,docker_api:o.data.docker_api,port_range:o.data.port_range}}catch(o){_.error(o.message||"获取配置失败")}})},handleSubmit(){return f(this,null,function*(){try{yield this.$refs.formRef.validate(),yield b.post("/api/admin/config",this.form),_({type:"success",message:"保存成功",duration:2e3}),this.getConfig()}catch(o){o!=="cancel"&&_.error(o.message||"保存失败")}})}}},y={class:"main"},I={class:"w-[99/100] mt-2 px-2 pb-2 bg-bg_color"},v={class:"p-4"};function C(o,e,n,g,r,c){const i=d("el-input"),s=d("el-form-item"),l=d("el-button"),p=d("el-form");return V(),x("div",y,[u("div",I,[e[4]||(e[4]=u("div",{class:"flex justify-between w-full h-[60px] p-4"},[u("p",{class:"font-bold truncate"},"系统配置")],-1)),u("div",v,[t(p,{ref:"formRef",model:r.form,rules:r.rules,"label-width":"140px",class:"config-form"},{default:a(()=>[t(s,{label:"出口IP",prop:"ip",class:"mb-4"},{default:a(()=>[t(i,{modelValue:r.form.ip,"onUpdate:modelValue":e[0]||(e[0]=m=>r.form.ip=m),placeholder:"请输入出口IP",class:"w-[400px]"},null,8,["modelValue"])]),_:1}),t(s,{label:"Docker API",prop:"docker_api",class:"mb-4"},{default:a(()=>[t(i,{modelValue:r.form.docker_api,"onUpdate:modelValue":e[1]||(e[1]=m=>r.form.docker_api=m),placeholder:"请输入Docker API地址",class:"w-[400px]"},null,8,["modelValue"])]),_:1}),t(s,{label:"开放端口范围",prop:"port_range",class:"mb-4"},{default:a(()=>[t(i,{modelValue:r.form.port_range,"onUpdate:modelValue":e[2]||(e[2]=m=>r.form.port_range=m),placeholder:"请输入开放端口范围",class:"w-[400px]"},null,8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(l,{type:"primary",onClick:c.handleSubmit},{default:a(()=>[...e[3]||(e[3]=[h(" 保存配置 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])])])}const q=k(w,[["render",C]]);export{q as default};
