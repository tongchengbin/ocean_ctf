import{_ as Q,D as n,a9 as z,m as x,n as g,H as e,G as i,Q as s,R as _,F as V,S as k,P as L,a7 as S,av as T}from"./index-pPDUazPi.js";const B={name:"operator",data(){return{listQuery:{page:1,page_size:10,search:null,action:null,status:null},loading:!1,total:0,list:[],typeOptions:[{value:"login",label:"登录"},{value:"logout",label:"登出"},{value:"create",label:"创建"},{value:"update",label:"更新"},{value:"delete",label:"删除"},{value:"build",label:"构建"},{value:"run",label:"运行"},{value:"destroy",label:"销毁"},{value:"other",label:"其他"}]}},created(){this.getList()},methods:{getList(){this.loading=!0,S.get("/api/admin/operator",this.listQuery).then(t=>{this.list=t.data,this.total=t.total}).catch(t=>{T.error(t.message||"获取数据失败")}).finally(()=>{this.loading=!1})},handleFilter(){this.listQuery.page=1,this.getList()},handleSizeChange(t){this.listQuery.page_size=t,this.getList()},handleCurrentChange(t){this.listQuery.page=t,this.getList()},getTypeLabel(t){const l=this.typeOptions.find(c=>c.value===t);return l?l.label:t},getTypeTagType(t){return{login:"success",logout:"info",create:"primary",update:"warning",delete:"danger",build:"primary",run:"success",destroy:"danger",other:""}[t]||""}}},D={class:"main"},F={class:"w-[99/100] mt-2 px-2 pb-2 bg-bg_color"},M={class:"page-r"};function N(t,l,c,j,a,u){const h=n("el-input"),p=n("el-form-item"),d=n("el-option"),m=n("el-select"),b=n("el-button"),f=n("el-form"),o=n("el-table-column"),y=n("el-tag"),v=n("el-table"),w=n("el-pagination"),C=z("loading");return g(),x("div",D,[e(f,{class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px]",inline:!0,model:a.listQuery},{default:s(()=>[e(p,null,{default:s(()=>[e(h,{modelValue:a.listQuery.search,"onUpdate:modelValue":l[0]||(l[0]=r=>a.listQuery.search=r),placeholder:"请输入操作内容",class:"w-[200px]",clearable:""},null,8,["modelValue"])]),_:1}),e(p,null,{default:s(()=>[e(m,{modelValue:a.listQuery.status,"onUpdate:modelValue":l[1]||(l[1]=r=>a.listQuery.status=r),placeholder:"操作状态",clearable:"",style:{width:"120px"}},{default:s(()=>[e(d,{label:"成功",value:"success"}),e(d,{label:"失败",value:"error"})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:s(()=>[e(b,{type:"primary",onClick:u.handleFilter},{default:s(()=>[...l[2]||(l[2]=[_("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),i("div",F,[l[3]||(l[3]=i("div",{class:"flex justify-between w-full page-title"},[i("p",{class:"font-bold truncate"},"审计日志")],-1)),i("div",null,[V((g(),k(v,{data:a.list,fit:"","highlight-current-row":"",stripe:""},{default:s(()=>[e(o,{align:"center",label:"操作用户",prop:"username",width:"120"}),e(o,{align:"center",label:"角色",prop:"role",width:"120"}),e(o,{align:"center",label:"操作内容",prop:"content","show-overflow-tooltip":"","min-width":"300"}),e(o,{align:"center",label:"IP地址",prop:"ip",width:"120"}),e(o,{align:"center",label:"状态",width:"100"},{default:s(r=>[e(y,{type:r.row.status==="success"?"success":"danger",size:"small"},{default:s(()=>[_(L(r.row.status==="success"?"成功":"失败"),1)]),_:2},1032,["type"])]),_:1}),e(o,{align:"center",label:"操作时间",prop:"create_time",width:"180"})]),_:1},8,["data"])),[[C,a.loading]]),i("div",M,[e(w,{"current-page":a.listQuery.page,"page-size":a.listQuery.page_size,"page-sizes":[10,20,30,50],total:a.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])])])}const O=Q(B,[["render",N]]);export{O as default};
