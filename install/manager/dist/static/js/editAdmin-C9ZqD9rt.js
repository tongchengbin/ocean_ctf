import{_ as V,a7 as m,D as r,S as f,n as d,Q as s,H as l,G as w,m as g,K as y,L as v,R as u,P as x}from"./index-BYxaA_Lm.js";const k={name:"editAdmin",props:{form:{type:Object,default:()=>{}}},data(){return{show:!1,title:"",formData:{},roles:[]}},created(){this.show=!0,this.getRole(),this.formData=this.form||{},this.formData.id?this.title="编辑管理员":this.title="添加管理员"},methods:{getRole(){m.get("/api/admin/role").then(a=>{this.roles=a.data})},submit(){this.form?m.put(`/api/admin/admin/${this.formData.id}`,this.formData).then(a=>{this.$message({message:"操作成功",type:"success"}),this.$emit("handleEdit",!0)}).catch(a=>{}):m.post("/api/admin/admin",this.formData).then(a=>{this.$message({message:"添加成功",type:"success"}),this.$emit("handleEdit",!0)}).catch(a=>{})}}},C={slot:"footer",class:"dialog-footer"};function E(a,e,B,U,t,_){const i=r("el-input"),n=r("el-form-item"),c=r("el-option"),h=r("el-select"),D=r("el-form"),p=r("el-button"),b=r("el-dialog");return d(),f(b,{center:"",visible:t.show,title:t.title,onClose:e[5]||(e[5]=o=>a.$emit("handleEdit",!1))},{default:s(()=>[l(D,{ref:"dataForm",model:t.formData,"label-position":"left","label-width":"80px","label-suffix":":",style:{width:"600px",margin:"auto auto","font-size":"13px"}},{default:s(()=>[l(n,{label:"用户名",prop:"username"},{default:s(()=>[l(i,{modelValue:t.formData.username,"onUpdate:modelValue":e[0]||(e[0]=o=>t.formData.username=o)},null,8,["modelValue"])]),_:1}),l(n,{class:"el-form-item",label:"角色"},{default:s(()=>[l(h,{modelValue:t.formData.role,"onUpdate:modelValue":e[1]||(e[1]=o=>t.formData.role=o),class:"select",clearable:""},{default:s(()=>[(d(!0),g(y,null,v(t.roles,o=>(d(),f(c,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"密    码",prop:"password"},{default:s(()=>[l(i,{modelValue:t.formData.password,"onUpdate:modelValue":e[2]||(e[2]=o=>t.formData.password=o),type:"password"},null,8,["modelValue"])]),_:1}),l(n,{label:"确认密码",prop:"confirm_password",style:{"font-size":"12px"}},{default:s(()=>[l(i,{modelValue:t.formData.confirm_password,"onUpdate:modelValue":e[3]||(e[3]=o=>t.formData.confirm_password=o),type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),w("div",C,[l(p,{onClick:e[4]||(e[4]=o=>a.$emit("handleEdit",!1))},{default:s(()=>[...e[6]||(e[6]=[u("取消",-1)])]),_:1}),l(p,{type:"primary",onClick:_.submit},{default:s(()=>[u(x(t.formData.id?"更新":"提交"),1)]),_:1},8,["onClick"])])]),_:1},8,["visible","title"])}const R=V(k,[["render",E]]);export{R as default};
