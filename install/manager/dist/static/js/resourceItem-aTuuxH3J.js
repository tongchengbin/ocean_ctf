import{_ as v,a8 as m,D as s,p as u,U as _,R as r,H as l,q as x,K as C,J as w,G as f,S as g,Q as q}from"./index-DGNIR5hM.js";import{a as B}from"./mavon-editor-CBDuhmni.js";/* empty css              */const E={components:{mavonEditor:B.mavonEditor},name:"addQuestion",props:{show:{type:Boolean},data:{type:Object}},data(){return{docker_type_list:[{label:"远程镜像",id:1},{label:"本地镜像",id:2}],resource_list:[],hostOption:[],imageOption:[],capture:null,fileChange:!1,options:[],attachment:[],form:{attachment:[],docker_type:null,image:null,name:null,description:null},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择类别",trigger:"blur"}],desc:[{required:!0,message:"请填写描述信息",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],flag:[{required:!0,message:"请输入flag",trigger:"blur"},{min:3,max:64,message:"长度在 3 到 64 个字符",trigger:"blur"}]}}},created(){this.getOptions(),this.getResourceList()},methods:{getOptions(){m.get("/api/admin/ctf/question/type").then(n=>{this.options=n.data})},getResourceList(){m.get("/api/admin/docker/resource",{page_size:99999,status:1}).then(n=>{this.resource_list=n.data})},cancel(){this.$emit("action",!1)},submit(){this.form.id||m.post("/api/admin/vulnerability",this.form).then(n=>{this.$emit("action",!0),this.$message({message:"提交成功",type:"success"})})}}},O={id:"my-markdown",class:"markdown-body"},U={slot:"footer",class:"dialog-footer"};function N(n,e,d,L,t,a){const c=s("el-input"),i=s("el-form-item"),b=s("el-option"),k=s("el-select"),y=s("mavon-editor"),h=s("el-form"),p=s("el-button"),V=s("el-dialog");return d.show?(u(),_(V,{key:0,"before-close":a.cancel,"show-close":!0,title:t.form.id?"编辑资源":"添加资源",visible:d.show,center:"","destroy-on-close":"","close-on-click-modal":!1,onClose:a.cancel,width:"40%"},{default:r(()=>[l(h,{model:t.form,ref:"form",class:"form","label-width":"80px",rules:t.rules},{default:r(()=>[l(i,{label:"资源名称",docker_type_list:""},{default:r(()=>[l(c,{modelValue:t.form.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.form.name=o)},null,8,["modelValue"])]),_:1}),l(i,{label:"加载类型",required:""},{default:r(()=>[l(k,{modelValue:t.form.docker_type,"onUpdate:modelValue":e[1]||(e[1]=o=>t.form.docker_type=o)},{default:r(()=>[(u(!0),x(w,null,C(t.docker_type_list,o=>(u(),_(b,{label:o.label,key:o.id,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"镜像名称"},{default:r(()=>[l(c,{modelValue:t.form.image,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.image=o)},null,8,["modelValue"])]),_:1}),l(i,{label:"描述"},{default:r(()=>[f("div",O,[l(y,{modelValue:t.form.description,"onUpdate:modelValue":e[3]||(e[3]=o=>t.form.description=o)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"]),f("span",U,[l(p,{onClick:a.cancel},{default:r(()=>e[4]||(e[4]=[g("取 消")])),_:1},8,["onClick"]),l(p,{type:"primary",onClick:a.submit},{default:r(()=>e[5]||(e[5]=[g("确 定")])),_:1},8,["onClick"])])]),_:1},8,["before-close","title","visible","onClose"])):q("",!0)}const j=v(E,[["render",N],["__scopeId","data-v-d8ab1a22"]]);export{j as default};
