import{_ as w,a8 as g,q as v,H as e,R as l,G as p,E as x,U as k,D as o,a9 as z,p as _,S as c,P as Q}from"./index-DGNIR5hM.js";const V={name:"container",data(){return{loading:!1,data:[],total:0,listQuery:{page:1,page_size:10,username:"",question:""}}},created(){this.getList()},methods:{getList(){this.loading=!0,g.get("/api/admin/ctf/resource",this.listQuery).then(n=>{this.data=n.data,this.total=n.total,this.loading=!1})},handleSizeChange(n){this.listQuery.page_size=n,this.getList()},handleCurrentChange(n){this.listQuery.page=n,this.getList()},refresh(n){g.post(`/api/admin/ctf/resource/${n.id}/refresh`).then(()=>{this.$message({message:"刷新成功",type:"success",duration:2e3}),this.getList()})},containerRemove(n){this.$confirm("确认要销毁该容器吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{g.post(`/api/admin/ctf/resource/${n.id}/remove`).then(()=>{this.$message({message:"销毁成功",type:"success",duration:2e3}),this.getList()})}).catch(()=>{})}}},L={class:"main"},B={class:"w-[99/100] mt-2 px-2 pb-2 bg-bg_color"},S={class:"page-r"};function q(n,t,D,N,a,r){const m=o("el-input"),u=o("el-form-item"),d=o("el-button"),h=o("el-form"),s=o("el-table-column"),f=o("el-table"),b=o("el-pagination"),y=z("loading");return _(),v("div",L,[e(h,{class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px]",inline:!0},{default:l(()=>[e(u,{class:"el-form-item",label:"用户名"},{default:l(()=>[e(m,{modelValue:a.listQuery.username,"onUpdate:modelValue":t[0]||(t[0]=i=>a.listQuery.username=i),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(u,{class:"el-form-item",label:"题目"},{default:l(()=>[e(m,{modelValue:a.listQuery.question,"onUpdate:modelValue":t[1]||(t[1]=i=>a.listQuery.question=i),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[e(d,{style:{margin:"0 5px"},type:"primary",onClick:r.getList},{default:l(()=>t[2]||(t[2]=[c("查询")])),_:1},8,["onClick"])]),_:1})]),_:1}),p("div",B,[t[5]||(t[5]=p("div",{class:"flex justify-between w-full h-[60px] p-4"},[p("p",{class:"font-bold truncate"},"容器列表")],-1)),p("div",null,[x((_(),k(f,{data:a.data,stripe:"","highlight-current-row":""},{default:l(()=>[e(s,{align:"center",label:"名称",prop:"name",width:"120"}),e(s,{align:"center",label:"用户",prop:"username",width:"100"}),e(s,{align:"center",label:"题目",prop:"question.name",width:"180"}),e(s,{align:"center",label:"端口信息",prop:"container_port",width:"120"},{default:l(i=>[c(Q(i.row.container_port),1)]),_:1}),e(s,{align:"center",label:"Flag",prop:"flag","class-name":"fnt-12"}),e(s,{align:"center",label:"创建日期",prop:"date_created",width:"150","class-name":"fnt-12"}),e(s,{align:"center",label:"有效时间",prop:"destroy_time",width:"150","class-name":"fnt-12"}),e(s,{align:"center",label:"操作",width:"160"},{default:l(i=>[e(d,{link:"",type:"danger",onClick:C=>r.containerRemove(i.row)},{default:l(()=>t[3]||(t[3]=[c("销毁")])),_:2},1032,["onClick"]),e(d,{link:"",type:"primary",onClick:C=>r.refresh(i.row)},{default:l(()=>t[4]||(t[4]=[c("刷新")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[y,a.loading]]),p("div",S,[e(b,{"current-page":a.listQuery.page,"page-size":a.listQuery.page_size,"page-sizes":[10,20,30,50],total:a.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:r.handleSizeChange,onCurrentChange:r.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])])])}const T=w(V,[["render",q]]);export{T as default};
