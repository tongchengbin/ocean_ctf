var f=(o,e,n)=>new Promise((g,r)=>{var c=l=>{try{s(n.next(l))}catch(i){r(i)}},p=l=>{try{s(n.throw(l))}catch(i){r(i)}},s=l=>l.done?g(l.value):Promise.resolve(l.value).then(c,p);s((n=n.apply(o,e)).next())});import{_ as k,a8 as b,ay as _,q as x,G as d,H as t,R as a,D as u,p as V,S as h}from"./index-Dasq562Y.js";const w={name:"sysInfo",data(){return{form:{port_range:null,ip:null,docker_api:null},rules:{ip:[{required:!0,message:"请输入出口IP",trigger:"blur"}],docker_api:[{required:!0,message:"请输入Docker API地址",trigger:"blur"}],port_range:[{required:!0,message:"请输入开放端口范围",trigger:"blur"}]}}},created(){this.getConfig()},methods:{getConfig(){return f(this,null,function*(){try{const o=yield b.get("/api/admin/config");this.form={ip:o.data.ip,docker_api:o.data.docker_api,port_range:o.data.port_range}}catch(o){_.error(o.message||"获取配置失败")}})},handleSubmit(){return f(this,null,function*(){try{yield this.$refs.formRef.validate(),yield b.post("/api/admin/config",this.form),_({type:"success",message:"保存成功",duration:2e3}),this.getConfig()}catch(o){o!=="cancel"&&_.error(o.message||"保存失败")}})}}},y={class:"main"},I={class:"w-[99/100] mt-2 px-2 pb-2 bg-bg_color"},C={class:"p-4"};function v(o,e,n,g,r,c){const p=u("el-input"),s=u("el-form-item"),l=u("el-button"),i=u("el-form");return V(),x("div",y,[d("div",I,[e[4]||(e[4]=d("div",{class:"flex justify-between w-full h-[60px] p-4"},[d("p",{class:"font-bold truncate"},"系统配置")],-1)),d("div",C,[t(i,{ref:"formRef",model:r.form,rules:r.rules,"label-width":"140px",class:"config-form"},{default:a(()=>[t(s,{label:"出口IP",prop:"ip",class:"mb-4"},{default:a(()=>[t(p,{modelValue:r.form.ip,"onUpdate:modelValue":e[0]||(e[0]=m=>r.form.ip=m),placeholder:"请输入出口IP",class:"w-[400px]"},null,8,["modelValue"])]),_:1}),t(s,{label:"Docker API",prop:"docker_api",class:"mb-4"},{default:a(()=>[t(p,{modelValue:r.form.docker_api,"onUpdate:modelValue":e[1]||(e[1]=m=>r.form.docker_api=m),placeholder:"请输入Docker API地址",class:"w-[400px]"},null,8,["modelValue"])]),_:1}),t(s,{label:"开放端口范围",prop:"port_range",class:"mb-4"},{default:a(()=>[t(p,{modelValue:r.form.port_range,"onUpdate:modelValue":e[2]||(e[2]=m=>r.form.port_range=m),placeholder:"请输入开放端口范围",class:"w-[400px]"},null,8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(l,{type:"primary",onClick:c.handleSubmit},{default:a(()=>e[3]||(e[3]=[h(" 保存配置 ")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])])])}const D=k(w,[["render",v]]);export{D as default};
