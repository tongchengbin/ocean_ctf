import{_ as D,D as o,a9 as k,m,n as r,H as e,G as p,Q as n,K as y,L as b,S as g,R as w,F as S,P as T,a7 as d}from"./index-BYxaA_Lm.js";import L from"./questionItem-Cja5s1wd.js";const A={name:"Question",components:{questionItem:L},data(){return{qType:[],statusList:[],statusType:["","primary","info","danger","warning"],total:0,listQuery:{has_solved:null,capture:null,page_size:10,q_type:null},loading:!1,chiData:{},showAddQuestion:!1,data:[],rid:null,captureName:null}},created(){this.getData(),this.getOptions()},methods:{getOptions(){d.get("/api/admin/ctf/answers/status_list").then(s=>{this.statusList=s.data}),d.get("/api/admin/ctf/question/type").then(s=>{this.qType=s.data})},handleSizeChange(s){this.listQuery.page_size=s,this.getData()},handleCurrentChange(s){this.listQuery.page=s,this.getData()},getData(){this.loading=!0,d.get("/api/admin/ctf/answers",this.listQuery).then(s=>{this.data=s.data,this.total=s.total,this.loading=!1})},handleAdd(){this.showAddQuestion=!1,this.getData()},switchActive(s,a){d.post(`/api/manager/ctf/question/${a.id}/active/`,{active:s}).then(v=>{this.$message({message:"修改成功",type:"success",duration:2e3})})}}},B={class:"main"},N={class:"w-[99/100] mt-2 px-2 pb-2 bg-bg_color"},U={class:"page-r"};function F(s,a,v,j,l,c){const _=o("el-option"),h=o("el-select"),u=o("el-form-item"),f=o("el-input"),Q=o("el-button"),C=o("el-form"),i=o("el-table-column"),V=o("el-tag"),q=o("el-table"),x=o("el-pagination"),z=k("loading");return r(),m("div",B,[e(C,{class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px]",inline:!0},{default:n(()=>[e(u,{class:"el-form-item",label:"分类",style:{width:"200px"}},{default:n(()=>[e(h,{modelValue:l.listQuery.q_type,"onUpdate:modelValue":a[0]||(a[0]=t=>l.listQuery.q_type=t),class:"select",clearable:"",filterable:"",style:{width:"100%"}},{default:n(()=>[(r(!0),m(y,null,b(l.qType,t=>(r(),g(_,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{class:"el-form-item",label:"状态",style:{width:"200px"}},{default:n(()=>[e(h,{modelValue:l.listQuery.status,"onUpdate:modelValue":a[1]||(a[1]=t=>l.listQuery.status=t),class:"select",clearable:"",filterable:""},{default:n(()=>[(r(!0),m(y,null,b(l.statusList,t=>(r(),g(_,{key:t[0],label:t[1],value:t[0]},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{class:"el-form-item",label:"用户名"},{default:n(()=>[e(f,{modelValue:l.listQuery.username,"onUpdate:modelValue":a[2]||(a[2]=t=>l.listQuery.username=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(u,{class:"el-form-item",label:"题目"},{default:n(()=>[e(f,{modelValue:l.listQuery.question,"onUpdate:modelValue":a[3]||(a[3]=t=>l.listQuery.question=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(u,null,{default:n(()=>[e(Q,{style:{margin:"0 5px"},type:"primary",onClick:c.getData},{default:n(()=>[...a[4]||(a[4]=[w("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1}),p("div",N,[a[5]||(a[5]=p("div",{class:"flex justify-between w-full h-[60px] p-4"},[p("p",{class:"font-bold truncate"},"答题列表")],-1)),p("div",null,[S((r(),g(q,{data:l.data,stripe:"","highlight-current-row":""},{default:n(()=>[e(i,{align:"center",label:"提交人",prop:"username",width:"120"}),e(i,{align:"center",label:"题目",prop:"question.name",width:"220"}),e(i,{align:"center",label:"类别",prop:"question.type",width:"100"}),e(i,{align:"center",label:"得分",prop:"score",width:"100"}),e(i,{align:"center",label:"Flag",prop:"flag","class-name":"fnt-12"}),e(i,{align:"center",label:"状态",prop:"has_solved",width:"100"},{default:n(t=>[e(V,{effect:"dark",type:l.statusType[t.row.status]},{default:n(()=>[w(T(t.row.status_name),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",label:"提交IP",prop:"ip",width:"150","class-name":"fnt-12"}),e(i,{align:"center",label:"提交时间",prop:"date_created",width:"150","class-name":"fnt-12"})]),_:1},8,["data"])),[[z,l.loading]]),p("div",U,[e(x,{"current-page":l.listQuery.page,"page-size":l.listQuery.page_size,"page-sizes":[10,20,30,50],total:l.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:c.handleSizeChange,onCurrentChange:c.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])])])}const P=D(A,[["render",F]]);export{P as default};
